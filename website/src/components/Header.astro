---
import ThemeToggle from './ThemeToggle.astro';

const currentPath = Astro.url.pathname;
---
<header class="fixed top-0 left-0 right-0 z-50 bg-background/90 backdrop-blur-md border-b border-border shadow-purple-sm">
  <nav class="container mx-auto px-6 py-4">
    <div class="flex items-center justify-between">
      <a href="/" class="text-2xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent hover:scale-110 transition-transform">
        JA
      </a>

      <div class="hidden md:flex items-center space-x-8">
        <a
          href="/"
          class={`text-muted-foreground hover:text-primary transition-smooth relative flex items-center gap-1 ${currentPath === '/' ? 'text-primary font-semibold' : ''}`}
          title="Home"
        >
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
          </svg>
          Home
          {currentPath === '/' ? <span class="absolute -bottom-1 left-0 w-full h-0.5 bg-primary rounded-full"></span> : null}
        </a>
        <a
          href="/about"
          class={`text-muted-foreground hover:text-primary transition-smooth relative ${currentPath === '/about' || currentPath === '/about/' ? 'text-primary font-semibold' : ''}`}
        >
          About
          {currentPath === '/about' || currentPath === '/about/' ? <span class="absolute -bottom-1 left-0 w-full h-0.5 bg-primary rounded-full"></span> : null}
        </a>
        <a
          href="/projects"
          class={`text-muted-foreground hover:text-primary transition-smooth relative ${currentPath === '/projects' || currentPath === '/projects/' ? 'text-primary font-semibold' : ''}`}
        >
          Projects
          {currentPath === '/projects' || currentPath === '/projects/' ? <span class="absolute -bottom-1 left-0 w-full h-0.5 bg-primary rounded-full"></span> : null}
        </a>
        <a
          href="/blog"
          class={`text-muted-foreground hover:text-primary transition-smooth relative ${currentPath.startsWith('/blog') ? 'text-primary font-semibold' : ''}`}
        >
          Blog
          {currentPath.startsWith('/blog') ? <span class="absolute -bottom-1 left-0 w-full h-0.5 bg-primary rounded-full"></span> : null}
        </a>
        <a
          href="/contact"
          class={`text-muted-foreground hover:text-primary transition-smooth relative ${currentPath === '/contact' || currentPath === '/contact/' ? 'text-primary font-semibold' : ''}`}
        >
          Contact
          {currentPath === '/contact' || currentPath === '/contact/' ? <span class="absolute -bottom-1 left-0 w-full h-0.5 bg-primary rounded-full"></span> : null}
        </a>
        <ThemeToggle />
      </div>

      <div class="md:hidden flex items-center space-x-4">
        <ThemeToggle />
        <button id="mobile-menu-button" class="text-muted-foreground hover:text-primary transition-smooth">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
    </div>

    <div id="mobile-menu" class="hidden md:hidden mt-4 pb-4">
      <div class="flex flex-col space-y-4">
        <a href="/" class={`text-muted-foreground hover:text-primary transition-smooth flex items-center gap-2 ${currentPath === '/' ? 'text-primary font-semibold' : ''}`}>
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
          </svg>
          Home
        </a>
        <a href="/about" class={`text-muted-foreground hover:text-primary transition-smooth ${currentPath === '/about' || currentPath === '/about/' ? 'text-primary font-semibold' : ''}`}>About</a>
        <a href="/projects" class={`text-muted-foreground hover:text-primary transition-smooth ${currentPath === '/projects' || currentPath === '/projects/' ? 'text-primary font-semibold' : ''}`}>Projects</a>
        <a href="/blog" class={`text-muted-foreground hover:text-primary transition-smooth ${currentPath.startsWith('/blog') ? 'text-primary font-semibold' : ''}`}>Blog</a>
        <a href="/contact" class={`text-muted-foreground hover:text-primary transition-smooth ${currentPath === '/contact' || currentPath === '/contact/' ? 'text-primary font-semibold' : ''}`}>Contact</a>
      </div>
    </div>
  </nav>
</header>

<script>
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');

  mobileMenuButton?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
  });

  document.querySelectorAll('#mobile-menu a').forEach(link => {
    link.addEventListener('click', () => {
      mobileMenu?.classList.add('hidden');
    });
  });
</script>